package main

import (
	"testing"
)

func TestInterpretString(t *testing.T) {
	tests := [][2]interface{}{
		{"", 0},
		{"()", 1},
		{"(())", 2},
		{"((()))", 3},
		{"(((())))", 4},
		{"(())()", 1},
		{"((()))()", 2},
		{"(((())))()", 3},
		{"((((()))))()", 4},
		{"((()))()()", 1},
		{"(((())))()()", 2},
		{"((((()))))()()", 3},

		{"()()", 0},
		{"()(())", 0},
		{"(())(())", 1},
		{"(())((()))", 1},

		{"()()()", -1},
		{"()()(())", -1},
		{"()()((()))", -1},
		{"()(())()", -1},
		{"()(())(())", -1},

		{"()()()()", 1},
		{"()()()()()", 0},
		{"(()()()())", 2},

		{"(()())", 1},
		{"((()()))", 2},
		{"((())())", 2},
		{"((()))()", 2},

		{"()()()(())()", 1},
		{"()()()((()))()", 2},
		{"()()()(((())))()", 3},
		{"()()()(())(())", 1},
		{"()()()((()))(())", 2},
		{"()()()(((())))(())", 3},
		{"()()()(())((()))", 1},
		{"()()()((()))((()))", 2},
		{"()()()(((())))((()))", 3},
	}
	for _, pair := range tests {
		p, r := []byte(pair[0].(string)), pair[1].(int)
		parsed := Parse(p)
		c := Count(parsed)
		if r != c {
			t.Errorf("%s: Expected %d but got %d %v", p, r, c, *parsed)
		} else {
			t.Logf("%s: Succeeded with %d %v", p, c, *parsed)
		}
	}
}

func TestAdvancedMethods(t *testing.T) {
	tests := [][2]interface{}{
		{"()()(())(()())()", 0},
		{"()()(())(()())(())", 1},
		{"()()(())(()())((()))", 2},
		{"()()(())(()())(((())))", 3},
		{"()()()(())()()", 0},
		{"()()()(())(())()", 0},
		{"()()()(())((()))()", 0},
	}
	for _, pair := range tests {
		p, r := []byte(pair[0].(string)), pair[1].(int)
		c := Count(Parse(p))
		if r != c {
			t.Errorf("%s: Expected %d but got %d", p, r, c)
		} else {
			t.Logf("%s: Succeeded with %d", p, c)
		}
	}
}
